<!DOCTYPE html><!--[if IE 9]><html class="no-js ie9 lt-ie10"><![endif]--><!--[if gt IE 9]><!--><html class="no-js"><!--<![endif]--><head><meta charset="utf-8"><!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=9,chrome=1'><![endif]--><meta name="viewport" content="user-scalable=no,minimal-ui"><title>Huddle Space | Collaborate At Will</title><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="alyda@me.com"><link rel="shortcut icon" type="image/x-icon" href="http://teamone-usa.com/favicon.ico"><base href=""><link rel="stylesheet" href="_/css/huddle.css"><script src="_/js/vendor/paulirish/matchMedia.min.js"></script><script>function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,resize()},66))}function resize(){document.querySelector("body"),console.log(window.innerWidth),device=window.matchMedia("(max-device-width: 767px)").matches?"phone":window.matchMedia("(min-device-width: 768px)").matches&&window.matchMedia("(max-device-width: 959px)").matches?"tablet":"desktop",console.log(device)}function DOMContentLoaded(){var e=document.body;e.classList?e.classList.add(device):e.className+=" "+device}var device="unknown";window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;resize(),document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1);</script><script src="_/js/modernizr-custom.js"></script></head><body><!--[if lt IE 9]><p>You are using an outdated browser. Please <a href="http://browsehappy.com/">upgrade</a> to a different browser to experience this site.</p><![endif]--><header id="header"><nav class="utilities dark"><span class="close"></span><div class="container"><h2 hidden>Utilities</h2><div class="col"><h3 class="form-title">Check-In</h3><form id="check-in"><input id="name" placeholder="Name" tabindex="0" required><ul id="matches"></ul><span class="select" style="margin-left:0" data-selected="">North Side</span><ul id="wing" class="options"><li class="option" value="north">North Side</li><li class="option" value="south">South Side</li></ul><span id="room-number" class="select" data-selected required>Room #</span><ul id="room-ids" class="options" style="left:34.8%"><li class="option-heading" id="northHeader">North</li><li class="option-heading" id="southHeader">South</li></ul><button id="checkin-form-button">Submit</button></form></div><div class="col"><h3 class="form-title">Search</h3><form id="search-form"><input type="search" placeholder="Find Someone"><ul id="matches2"></ul><button>Submit</button></form></div></div></nav><div class="container"><div class="banner"><h1 class="logo">Huddle <span class="light">Space</span></h1><span class="tagline">Collaborate at will</span></div><div class="toggle"><span>toggle</span></div></div></header><div id="confirm_popup">Checked in successfully! <button class="confirm_popup_close">Close</button></div><div id="search_popup"><p id="searchResults"></p><button class="search_popup_close">Close</button></div><div id="document" role="document"><div class="subway mobilehide"><div id="draggable" class="container"><h3 hidden>Subway Diagram</h3><span class="marker north">North Side</span><ul class="north roomCont"></ul><span class="marker kitchen">Kitchen</span> <span class="marker line"></span> <span class="marker front-desk">Front Desk</span><ul class="south roomCont"></ul><span class="marker south">South Side</span> <span class="marker all-agency">All Agency</span></div></div><h3 hidden>Grid</h3><div class="legend"><div class="list-wrap"><div class="legend-wrap"><div class="circle open"></div><p>Open</p></div><div class="legend-wrap"><div class="circle recent"></div><p>Almost Free</p></div><div class="legend-wrap"><div class="circle occupied"></div><p>Occupied</p></div></div></div><div class="filters"><div class="mobileonly" style="background:white"><span class="select">Filter Rooms</span><ul class="views"><li class="grid selected"><span class="dots">view as grid</span></li><li class="map"><span class="pin">view as map</span></li></ul></div><div class="container"><span class="h4 filter-title">Show Only:</span><ul class="status"><li class="avail-tog filter special" data-filter=".available">Available</li><li class="all-tog reset selected">All</li></ul><span class="h4 filter-title mobileonly" style="clear:right">Filter by:</span><ul class="type" id="filtersContainer"></ul><span class="mobileonly done">Done</span></div></div><div id="grid-north" class="container"><div class="fancy"><h4 class="ruled"><span>North Side</span></h4></div><ul class="rooms north"><li class="gap"></li><li class="gap"></li><li class="gap"></li><li class="gap"></li><li class="gap"></li><p class="error">No rooms were found matching the selected filters.</p></ul></div><div class="details light"><div class="container"><header id="roomDetails" class="details-header"><span class="close"></span> <span class="h2 room">N-1</span> <span class="h3"><span class="location">North Side</span> <span class="mobilehide">//</span> <span class="details-type">Lounge</span></span> <span class="check-in button mobileonly" style="margin-top:20px">Check-In</span></header><div class="col col1"><figure class="floorplan"></figure><span class="check-in button mobilehide">Check-In</span></div><div class="col col2"><ul class="amenities col"><li class="h3">Room Details:</li></ul><ul class="occupants col"><li class="h3">Occupants:</li></ul></div></div></div><div id="grid-south" class="container"><a class="mobileonly backToTop" href="#top" title="Return to the top of this page">return to top</a><div class="fancy"><h4 class="ruled"><span>South Side</span></h4></div><ul class="rooms south"><li class="gap"></li><li class="gap"></li><li class="gap"></li><li class="gap"></li><p class="error">No open rooms were found matching the selected filters.</p></ul></div></div><footer id="footer"><div class="container"><p class="copy">&copy; 2014 Team One USA</p><small class="message"></small></div><script type="text/javascript" src="_/js/vendor/jquery-2.1.0.min.js"></script><script type="text/javascript" src="_/js/vendor/jquery.mixitup.min.js"></script><script type="text/javascript" src="_/js/vendor/socket.io.min.js"></script><script type="text/javascript">var huddlerooms=[],users=[],lastVal="",findCache,lastVal2="",findCache2,socket=io.connect("http://solr.t1p1.com:3000"),nRooms=[],sRooms=[];$(function(){function e(e){var a=e.rooms.length;for(i=0;i<a;++i){var s=e.rooms[i];huddlerooms.push({id:s.internal_name,name:s.display_name,features:e.categories[s.category_id].features,overrides:s.override}),-1!==s.display_name.indexOf("N")?(console.log(s.display_name),nRooms.push({id:s.internal_name,name:s.display_name,features:e.categories[s.category_id].features,overrides:s.override}),0==$("#room-ids .northRoom").length?$("#room-ids #northHeader").after('<li class="option northRoom" value="'+s.internal_name+'">'+s.display_name+"</li>"):$("#room-ids .northRoom:last").after('<li class="option northRoom" value="'+s.internal_name+'">'+s.display_name+"</li>"),$("#draggable .north.roomCont").append('<li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+'"><span>'+s.display_name+"</span></li>"),0==$("#grid-north .rooms .mix").length?$("#grid-north .rooms").prepend('                <li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+' mix">                  <span>'+s.display_name+'</span>                  <ul class="users"></ul>                </li>                '):$("#grid-north .rooms .mix:last").after('                  <li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+' mix">                  <span>'+s.display_name+'</span>                  <ul class="users"></ul>                </li>                ')):(sRooms.push({id:s.internal_name,name:s.display_name,features:e.categories[s.category_id].features,overrides:s.override}),0==$("#room-ids .southRoom").length?$("#room-ids #southHeader").after('<li class="option southRoom" value="'+s.internal_name+'">'+s.display_name+"</li>"):$("#room-ids .southRoom:last").after('<li class="option southRoom" value="'+s.internal_name+'">'+s.display_name+"</li>"),$("#draggable .south.roomCont").append('<li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+'"><span>'+s.display_name+"</span></li>"),0==$("#grid-south .rooms .mix").length?$("#grid-south .rooms").prepend('                <li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+' mix">                  <span>'+s.display_name+'</span>                  <ul class="users"></ul>                </li>                '):$("#grid-south .rooms .mix:last").after('                  <li id="'+s.display_name+'" class="room-'+s.internal_name+" category-"+s.category_id+' mix">                  <span>'+s.display_name+'</span>                  <ul class="users"></ul>                </li>                ')),$(".rooms #"+s.display_name).data("features",e.categories[s.category_id].features),$(".rooms #"+s.display_name).data("overrides",s.override)}for(category_id in e.categories)$("#filtersContainer").append('<li class="filter" data-filter=".category-'+category_id+'">'+e.categories[category_id].display_name+"</li>")}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}var s=!1;$(".avail-tog").on("click",function(){s=s?!1:!0,console.log(s)}),$(".all-tog").on("click",function(){s&&(s=!1)}),$.ajax({url:"rooms.json",async:!1,dataType:"json",success:function(a){e(a)}}),$.ajax({url:"users.json",dataType:"json",success:function(e){for(var a in e)users.push(e[a].first_last);findCache=users,findCache2=users}}),socket.on("mqtt",function(e){$("#message").html(e.topic+", "+e.flag),2==e.flag?($(".room-"+e.topic).removeClass("available purgatory").addClass("occupied"),$(".subway li").hasClass("dim")?$(".rooms").mixItUp("filter",t,n):null):1==e.flag?$(".room-"+e.topic).removeClass("occupied available").addClass("purgatory"):($(".room-"+e.topic).removeClass("occupied purgatory").addClass("available"),$(".room-"+e.topic+" .users").empty(),$(".room-"+e.topic+" .users").css("border",""),$(".room-"+e.topic).removeClass("person-found"),$(".subway li").hasClass("dim")?$(".rooms").mixItUp("filter",t,n):null)}),socket.on("checkin",function(e){$(".rooms .room-"+e.room+" .users").append("<li>"+a(e.user)+"</li>")});var t,o={$filters:null,$reset:null,groups:[],outputArray:[],outputString:"",init:function(){var e=this;e.$filters=$(".filters"),e.$reset=$(".reset"),e.$container=$(".rooms"),e.$filters.find(".type li, .special").each(function(){e.groups.push({$buttons:$(this),active:""})}),e.bindHandlers()},bindHandlers:function(){var e=this;e.$filters.on("click",".filter",function(a){a.preventDefault();var s=$(this);s.hasClass("selected")?s.removeClass("selected"):s.addClass("selected"),e.parseFilters(),s.hasClass("special")?e.$reset.toggleClass("selected"):null}),e.$reset.on("click",function(a){var s=$(this);e.$filters.find('.filter[data-filter=".available"]').removeClass("selected"),e.parseFilters(),$(" li.special ").hasClass("selected")?s.removeClass("selected"):s.addClass("selected")}),e.$container.on("mixStart",function(e,a){$(".rooms").has(".details").length>0&&(console.log("hide details"),l())}),e.$container.on("mixEnd",function(e,a){})},parseFilters:function(){for(var e,a=this,s=0;e=a.groups[s];s++)e.active=e.$buttons.filter(".selected").data("filter")||"";a.concatenate()},concatenate:function(){var e=this;e.outputString="";for(var a,i=0,t=0,o=!1;a=e.groups[i];i++)".available"==a.active?o=!0:""!=a.active&&(0==t?o?e.outputString+=a.active+".available":e.outputString+=a.active:o?e.outputString+=", "+a.active+".available":e.outputString+=", "+a.active,t++);!e.outputString.length&&(e.outputString="all"),e.$container.mixItUp("isLoaded")&&e.$container.mixItUp("filter",e.outputString,n),"all"===e.outputString&&s&&(console.log("fire!"),e.$container.mixItUp("filter",".category-1.available, .category-2.available, .category-3.available, .category-4.available",n))}},n=function(e){".mix"!=e.activeFilter?($(".subway li").addClass("dim"),$(".subway li"+e.activeFilter).removeClass("dim")):$(".subway li").removeClass("dim"),t=e.activeFilter,console.log(t)};o.init(),$(".rooms").mixItUp({controls:{enable:!1}}),$(".rooms li").hover(function(e){$(this).siblings().addClass("unfocus")},function(e){$(this).siblings().removeClass("unfocus")}),$(".views li").click(function(e){$(this).hasClass("grid")?($(".subway").addClass("mobilehide"),$("#grid-north, #grid-south").removeClass("mobilehide")):$(this).hasClass("map")&&($("#grid-north, #grid-south").addClass("mobilehide"),$(".subway").removeClass("mobilehide")),$(this).addClass("selected").siblings().removeClass("selected")}),$(".done, .filters .select").click(function(){$(".filters").toggleClass("open")}),$(".rooms li.mix").click(function(){var e,a,s,i=$(this),t=$(".details"),o=$(".mix[style*='block']"),n=6;$.grep(o,function(a){$(a).attr("id")==i.attr("id")&&(e=o.index(a)+1)}),r(i),("phone"==device||window.matchMedia("(max-width: 768px)").matches)&&(n=3),a=Math.ceil(e/n),s=a*n,i.hasClass("details-open")?($("#grid-north").after(t),t.css("display","")):(s>o.length?$(i.parent()).append(t):$($.makeArray(o)[s-1]).after(t),t.css("display","inline-block"),$(".rooms li").removeClass("details-open")),i.toggleClass("details-open")});var r=function(e){var a,s=e,t=$(".details"),o=s.attr("id"),n=o.indexOf("N")>-1?"North Side":"South Side",r=s.data("features"),l=s.data("overrides"),c=s.find(".users li");switch(!0){case s.hasClass("category-1"):a="standing";break;case s.hasClass("category-2"):a="lounge";break;case s.hasClass("category-3"):a="table";break;case s.hasClass("category-4"):a="open"}for(t.find(".room").text(o),t.find(".location").text(n),t.find(".details-type").text(a),t.find(".floorplan").attr("class","floorplan"),t.find(".floorplan").addClass(a),t.find(".amenities li:not(.h3)").remove(),i=0;i<r.length;i++)t.find(".amenities").append("<li>"+r[i]+"</li>");if(l)for(i=0;i<l.length;i++)l[i].indexOf("-")>-1?t.find(".amenities li:contains("+l[i].substring(1,l[i].length)+")").remove():t.find(".amenities").append("<li>"+l[i]+"</li>");for(console.log(c),console.log(c.length),$(".occupants").empty(),$(".occupants").append('<li class="h3">Occupants:</li>'),i=0;i<c.length;i++)console.log(c[i]),$(c[i]).clone().appendTo($(".occupants"))};$(".check-in").click(function(){$(".utilities").show(),$("#name").focus()}),$(".details .close").click(function(){l()});var l=function(){var e=$(".details");$("#grid-north").after(e),e.css("display",""),$(".rooms").find(".details-open").removeClass("details-open")};$(".toggle, .utilities .close").click(function(){$(".utilities").toggle()}),$("#check-in").submit(function(e){e.preventDefault();var s=!0;if($("[required]").each(function(e){var a=$(this);""===a.val()&&""==a.data("selected")&&(console.log("There was an error with your submission"),s=!1,a.css("border-color","red"))}),s){var i=$("#name").val(),t=$("#room-number").data("selected"),o=$(".rooms .room-"+t+" .users");socket.emit("checkIn",{room:t,user:i}),o.append("<li>"+a(i)+"</li>"),$("#name").val(""),console.log($("#checkin-form-button")),$("#checkin-form-button").addClass("confirm_popup_open"),$("#checkin-form-button").click()}}),$("#matches").on("click","li",function(){$("#name").val($(this).text()),$("#matches").hide()}),$("#name").focus(function(){$("#matches").show()}),$("#name").keyup(function(){var e=$(this).val();e.length<lastVal.length&&(findCache=users),findCache=findCache.filter(function(a,s,i){return a.toLowerCase().indexOf(e.toLowerCase())>-1}),lastVal=e,cacheLength=findCache.length,cacheLength>10&&(cacheLength=10),$("#matches").empty();for(var a=0;a<cacheLength;++a)$("#matches").append("<li>"+findCache[a]+"</li>")}),$("#name, .select").blur(function(){setTimeout(function(){$(this).next().hide(),$("#matches").empty()},250)}),$(".select").click(function(){$(this).next(".options").toggle(),$(this).css("border-color","")}),$(".options li").click(function(){$(this).parent().prev().data("selected",$(this).attr("value")),$(this).parent().prev().text($(this).text()),$(this).parent().toggle()}),$("#wing li").click(function(){switch($("#room-ids li").hide(),$(this).attr("value")){case"north":$('#room-ids li:contains("N-") ').show();break;case"south":$('#room-ids li:contains("S-") ').show()}}),$.expr[":"].contains=$.expr.createPseudo(function(e){return function(a){return $(a).text().toUpperCase().indexOf(e.toUpperCase())>=0}}),$("#matches2").on("click","li",function(){$("#search-form input").val($(this).text()).submit(),$("#matches2").hide()}),$("#search-form input").focus(function(){}),$("#search-form input").keyup(function(){var e=$(this).val();e.length<lastVal2.length&&(findCache2=users),findCache2=findCache2.filter(function(a,s,i){return a.toLowerCase().indexOf(e.toLowerCase())>-1}),lastVal2=e,cacheLength=findCache2.length,cacheLength>10&&(cacheLength=10),$("#matches2").empty();for(var a=0;a<cacheLength;++a)$("#matches2").append("<li>"+findCache2[a]+"</li>");$(".users").css("border",""),$(".users:contains("+e+")").css("border","1px solid red"),$(".subway li").removeClass("person-found"),$(".subway li#"+$(".users:contains("+e+")").parent().attr("id")).addClass("person-found"),0==e.length&&($(".users").css("border",""),$(".subway li").removeClass("person-found")),$("#matches2").show()}),$("#search-form input").blur(function(){setTimeout(function(){$("#matches2").hide(),$("#matches2").empty()},250)}),$("#search-form").submit(function(e){e.preventDefault();var a=$("#search-form :input").val(),s=$(".subway li#"+$(".users:contains("+a+")").parent().attr("id"));return void 0===s[0]?($("#searchResults").html(a+" can't be found, or is not checked in to a huddle room"),void $("#search_popup").popup("show")):($("#"+s[0].id).click(),void $("html, body").delay(500).animate({scrollTop:$("#roomDetails").offset().top},1e3))}),$(".subway li").click(function(){$(".rooms li#"+$(this).attr("id")).trigger("click")})});</script><script src="_/js/vendor/jquery.popupoverlay.js"></script><script src="_/js/app.js"></script></footer></body></html>